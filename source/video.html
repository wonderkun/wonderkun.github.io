<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.js"></script>

<!-- Or if you want a more recent alpha version -->
<!-- <script src="https://cdn.jsdelivr.net/npm/hls.js@alpha"></script> -->
<video width="100%" height="80%" id="video"  autoplay="autoplay" controls></video>
<div class = "footer" style="margin-top:10px" id="footer">
    
<div>
<script>
  var video = document.getElementById('video');

  var videoSrc = 'https://c2.monidai.com/20220125/wQXxYvoh/index.m3u8';
  if (Hls.isSupported()) {
    var hls = new Hls();
    hls.loadSource(videoSrc);
    hls.attachMedia(video);
  }

  // HLS.js is not supported on platforms that do not have Media Source
  // Extensions (MSE) enabled.
  //
  // When the browser has built-in HLS support (check using `canPlayType`),
  // we can provide an HLS manifest (i.e. .m3u8 URL) directly to the video
  // element through the `src` property. This is using the built-in support
  // of the plain video element, without using HLS.js.
  //
  // Note: it would be more normal to wait on the 'canplay' event below however
  // on Safari (where you are most likely to find built-in HLS support) the
  // video.src URL must be on the user-driven white-list before a 'canplay'
  // event will be emitted; the last video event that can be reliably
  // listened-for when the URL is not on the white-list is 'loadedmetadata'.
  else if (video.canPlayType('application/vnd.apple.mpegurl')) {
    video.src = videoSrc;
  }

  function pad(num, n) {
    var len = num.toString().length;
    while(len < n) {
      num = "0" + num;
      len++;
    }
    return num;
  }
  var videoList = Array();

  for(i=1;i<=21;i++){
    url = "https://uf.haoyu666.top/uploads%2F20210824%2F%E6%89%AB%E9%BB%91%E9%A3%8E%E6%9A%B4"+ pad(i,2) +".m3u8"
    videoList.push(url)
  }
  new_videoList = Array(
    "https://uf.haoyu666.top/uploads%2F20210824%2Fnew22.m3u8",
    "https://uf.haoyu666.top/uploads%2F20210824%2Fnew23.m3u8",
    "https://uf.haoyu666.top/uploads%2F20210824%2Fnew24.m3u8",
    "https://uf.haoyu666.top/uploads%2F20210824%2Fnew25.m3u8",
    "https://uf.haoyu666.top/uploads%2F20210824%2Fnew26.m3u8",
    "https://uf.haoyu666.top/uploads%2F20210824%2Fnew27.m3u8",
  );
  videoList = videoList.concat(new_videoList)
  
  for(j=0;j<videoList.length;j++){
    var hit = "第" + (j+1).toString() + "集";
    var url = videoList[j];
    // $("#footer").append(
    //   `<button class="bt" type="button" url="${url}" style="margin:4">${hit}</button>`
    // )
  }

  $(".bt").click(function(e){

        var videoSrc = $(this).attr("url");;
        if (Hls.isSupported()) {
          var hls = new Hls();
          hls.loadSource(videoSrc);
          hls.attachMedia(video);
        }

        // HLS.js is not supported on platforms that do not have Media Source
        // Extensions (MSE) enabled.
        //
        // When the browser has built-in HLS support (check using `canPlayType`),
        // we can provide an HLS manifest (i.e. .m3u8 URL) directly to the video
        // element through the `src` property. This is using the built-in support
        // of the plain video element, without using HLS.js.
        //
        // Note: it would be more normal to wait on the 'canplay' event below however
        // on Safari (where you are most likely to find built-in HLS support) the
        // video.src URL must be on the user-driven white-list before a 'canplay'
        // event will be emitted; the last video event that can be reliably
        // listened-for when the URL is not on the white-list is 'loadedmetadata'.
        else if (video.canPlayType('application/vnd.apple.mpegurl')) {
          video.src = videoSrc;
        }
        video.play();
  })


</script>
